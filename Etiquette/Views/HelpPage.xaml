<Page
    x:Class="Etiquette.Views.HelpPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:converters="using:Etiquette.Converters"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Page.Resources>
        <converters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    </Page.Resources>

    <ScrollViewer Padding="24">
        <StackPanel Spacing="20" MaxWidth="900" HorizontalAlignment="Left">

            <StackPanel Spacing="8">
                <TextBlock Text="Centre d'aide &amp; Diagnostic" Style="{StaticResource TitleTextBlockStyle}"/>
                <TextBlock Text="Documentation, outils de test et √©tat du syst√®me." Foreground="Gray"/>
            </StackPanel>

            <Border Height="1" Background="{ThemeResource SystemControlForegroundBaseMediumLowBrush}" Opacity="0.2"/>

            <Expander HorizontalAlignment="Stretch" IsExpanded="True">
                <Expander.Header>
                    <StackPanel Orientation="Horizontal" Spacing="10">
                        <FontIcon Glyph="&#xE9F5;" FontFamily="Segoe MDL2 Assets" Foreground="{ThemeResource SystemAccentColor}"/>
                        <TextBlock Text="Diagnostic Syst√®me" Style="{StaticResource BodyStrongTextBlockStyle}"/>
                    </StackPanel>
                </Expander.Header>
                <Expander.Content>
                    <Grid ColumnSpacing="20" RowSpacing="15" Padding="0,10,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <StackPanel Grid.Row="0" Grid.Column="0" Spacing="5">
                            <TextBlock Text="R√©seau (Ce poste)" FontWeight="Bold" Foreground="Gray"/>
                            <StackPanel Orientation="Horizontal" Spacing="10">
                                <FontIcon Glyph="&#xE7F3;" FontSize="16"/>
                                <TextBlock x:Name="TxtIpAddress" Text="Calcul en cours..." FontWeight="SemiBold"/>
                            </StackPanel>
                            <TextBlock Text="Communiquez cette IP pour connecter d'autres postes." FontSize="11" Foreground="Gray" TextWrapping="Wrap"/>
                        </StackPanel>

                        <StackPanel Grid.Row="0" Grid.Column="1" Spacing="5">
                            <TextBlock Text="Base de donn√©es" FontWeight="Bold" Foreground="Gray"/>
                            <StackPanel Orientation="Horizontal" Spacing="10">
                                <FontIcon x:Name="IconDbStatus" Glyph="&#xE7F8;" FontSize="16"/>
                                <TextBlock x:Name="TxtDbStatus" Text="V√©rification..." FontWeight="SemiBold"/>
                            </StackPanel>
                            <TextBlock x:Name="TxtDbDetail" Text="Mode Standalone (Local)" FontSize="11" Foreground="Gray"/>
                        </StackPanel>

                        <Border Grid.Row="1" Grid.ColumnSpan="2" BorderThickness="0,1,0,0" BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" Padding="0,15,0,0">
                            <StackPanel Orientation="Horizontal" Spacing="15">
                                <Button Click="OnPrintTest" Style="{StaticResource DefaultButtonStyle}">
                                    <StackPanel Orientation="Horizontal" Spacing="8">
                                        <FontIcon Glyph="&#xE749;"/>
                                        <TextBlock Text="Imprimer une page de test"/>
                                    </StackPanel>
                                </Button>

                                <Button Click="OnCheckConnection" Style="{StaticResource DefaultButtonStyle}">
                                    <StackPanel Orientation="Horizontal" Spacing="8">
                                        <FontIcon Glyph="&#xE72C;"/>
                                        <TextBlock Text="Tester la connexion serveur"/>
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                        </Border>
                    </Grid>
                </Expander.Content>
            </Expander>

            <Expander HorizontalAlignment="Stretch" IsExpanded="False">
                <Expander.Header>
                    <StackPanel Orientation="Horizontal" Spacing="10">
                        <FontIcon Glyph="&#xE896;" FontFamily="Segoe MDL2 Assets"/>
                        <TextBlock Text="Guide : Comment utiliser le Mode Rafale ?" Style="{StaticResource BodyStrongTextBlockStyle}"/>
                    </StackPanel>
                </Expander.Header>
                <Expander.Content>
                    <StackPanel Spacing="12" Padding="0,10,0,0">
                        <TextBlock TextWrapping="Wrap">
                            Le mode rafale est con√ßu pour enchainer l'impression d'√©tiquettes sans toucher √† la souris.
                        </TextBlock>
                        <Grid ColumnSpacing="15" RowSpacing="10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Border Grid.Row="0" Grid.Column="0" Background="{ThemeResource AccentFillColorDefaultBrush}" CornerRadius="4" Padding="8,4">
                                <TextBlock Text="1" Foreground="White" FontWeight="Bold"/>
                            </Border>
                            <TextBlock Grid.Row="0" Grid.Column="1" VerticalAlignment="Center" Text="Saisissez le Nom du produit et appuyez sur ENTR√âE."/>

                            <Border Grid.Row="1" Grid.Column="0" Background="{ThemeResource AccentFillColorDefaultBrush}" CornerRadius="4" Padding="8,4">
                                <TextBlock Text="2" Foreground="White" FontWeight="Bold"/>
                            </Border>
                            <TextBlock Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" Text="Le curseur saute au Scan. Scannez ou tapez le code-barres, puis ENTR√âE."/>

                            <Border Grid.Row="2" Grid.Column="0" Background="{ThemeResource AccentFillColorDefaultBrush}" CornerRadius="4" Padding="8,4">
                                <TextBlock Text="3" Foreground="White" FontWeight="Bold"/>
                            </Border>
                            <TextBlock Grid.Row="2" Grid.Column="1" VerticalAlignment="Center" Text="L'√©tiquette s'imprime et le formulaire se vide pour la suivante."/>
                        </Grid>
                    </StackPanel>
                </Expander.Content>
            </Expander>

            <Expander HorizontalAlignment="Stretch">
                <Expander.Header>
                    <StackPanel Orientation="Horizontal" Spacing="10">
                        <FontIcon Glyph="&#xE90F;" FontFamily="Segoe MDL2 Assets"/>
                        <TextBlock Text="Probl√®mes fr√©quents" Style="{StaticResource BodyStrongTextBlockStyle}"/>
                    </StackPanel>
                </Expander.Header>
                <Expander.Content>
                    <StackPanel Spacing="15" Padding="0,10,0,0">
                        <StackPanel Spacing="5">
                            <TextBlock Text="‚ö†Ô∏è Je n'arrive pas √† imprimer" FontWeight="SemiBold" Foreground="{ThemeResource SystemFillColorCautionBrush}"/>
                            <TextBlock Text="V√©rifiez que l'imprimante est bien s√©lectionn√©e dans les Param√®tres. Utilisez le bouton 'Page de test' ci-dessus." TextWrapping="Wrap" Style="{StaticResource CaptionTextBlockStyle}"/>
                        </StackPanel>
                        <Border Height="1" Background="Gray" Opacity="0.1"/>
                        <StackPanel Spacing="5">
                            <TextBlock Text="üîå Message 'Connexion perdue'" FontWeight="SemiBold" Foreground="{ThemeResource SystemFillColorCriticalBrush}"/>
                            <TextBlock Text="Le serveur est inaccessible. L'application passe en mode Local. V√©rifiez que l'ordinateur serveur est allum√©." TextWrapping="Wrap" Style="{StaticResource CaptionTextBlockStyle}"/>
                        </StackPanel>
                    </StackPanel>
                </Expander.Content>
            </Expander>

            <StackPanel Spacing="10" Margin="0,20,0,0">
                <TextBlock Text="Support Technique" Style="{StaticResource SubtitleTextBlockStyle}"/>

                <Border Background="{ThemeResource LayerFillColorAltBrush}" CornerRadius="8" Padding="16">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Spacing="4">
                            <TextBlock x:Name="TxtVersion" Text="Version 1.0.0" FontWeight="Bold"/>
                            <TextBlock Text="En cas de probl√®me technique, consultez les journaux d'erreurs." FontSize="12" Foreground="Gray"/>
                        </StackPanel>

                        <Button Grid.Column="1" Click="OnOpenLogs" Style="{StaticResource AccentButtonStyle}">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon Glyph="&#xE8F1;" FontSize="14"/>
                                <TextBlock Text="Voir les Logs"/>
                            </StackPanel>
                        </Button>
                    </Grid>
                </Border>

                <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="1" CornerRadius="8" Padding="16">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Spacing="4">
                            <TextBlock Text="Un bug ? Une suggestion ?" FontWeight="SemiBold"/>
                            <TextBlock Text="En cas de bug logiciel vous pouvez cr√©er un rapport d'erreur sur la page du developpeur." FontSize="12" Foreground="Gray" TextWrapping="Wrap"/>
                        </StackPanel>

                        <Button Grid.Column="1" Click="OnOpenGitHub" VerticalAlignment="Center">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon Glyph="&#xE939;" FontFamily="Segoe MDL2 Assets"/>
                                <TextBlock Text="Ouvrir GitHub"/>
                            </StackPanel>
                        </Button>
                    </Grid>
                </Border>
            </StackPanel>

        </StackPanel>
    </ScrollViewer>
</Page>